<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/gcn/resources/img/graalvm.png" />
  <meta name="twitter:widgets:border-color" content="#55acee">

  <title>
    
      Securely Store Application Secrets in Oracle Cloud Infrastructure Vault
    
  </title>
  <meta name="description" content="Graal Cloud Native (GCN) is a build of a curated set of Micronaut framework modules and their required libraries for building portable cloud-native microserv..."/>
  <meta name="last_modified" content="2023-10-12 08:01:39 +0000"/>
  <link rel="stylesheet" href="/gcn/assets/main.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/gcn/resources/img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/gcn/resources/img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/gcn/resources/img/favicon/favicon-16x16.png">
  <link rel="manifest" href="/resources/img/favicon/site.webmanifest">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="google-site-verification" content="-vRqwa9WYn6AaQGnl88xvrLw6ac4xoKVkZkhanmlRhU" />
  <link rel="canonical" href="https://www.graal.cloud/gcn/gcn-modules/secret-management/micronaut-secrets-oracle-cloud/">

  <!-- jQuery UI Tabs -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/gcn/resources/lib/jquery/jquery-ui.css">
</head>

      <script src="/gcn/resources/lib/jquery/jquery-3.6.1.min.js"></script>
    <script src="/gcn/resources/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src='/gcn/resources/lib/sticky-sidebar/resizeSensor.js'></script>
    <script src='/gcn/resources/lib/sticky-sidebar/sticky-sidebar.min.js'></script>
    <script src="/gcn/resources/lib/highlight/highlight.min.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Add TRUSTe Consent Script and Analytics -->
    <script async="async" type="text/javascript" src='//consent.trustarc.com/notice?domain=oracle.com&c=teconsent&js=bb&noticeType=bb&text=true&cdn=1&pcookie&gtm=1' crossorigin></script>
    <script src="https://www.oracle.com/assets/truste-oraclelib.js"></script>
    <!-- jQuery UI Tabs -->
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>


  <body class="preload">

    <div  class="wrapper wrapper--nofooter" >

      <header  class="header header--content" 
  role="banner">

  

  

    <nav class="menu">
      <div class="menu__row">
        <div>
          <a href="/gcn/">
            <img class="logo-mobile" src="/gcn/resources/img/gcn-logo-01.svg" alt="Graal Cloud Native logo">
          </a>
        </div>
        <div class="menu__container">
          <ul class="menu__list">
            <li class="menu__item">
              <a href="/gcn/about/" class="menu__link">About</a>
            </li>
            <li class="menu__item">
              <a href="/gcn/get-started/" class="menu__link">Get Started</a>
            </li>
            <!-- <li class="menu__item">
              <a href="/gcn/modules/" class="menu__link">Modules</a>
            </li>
            <li class="menu__item">
              <a href="/gcn/guides/" class="menu__link">Guides</a>
            </li>
            <li class="menu__item">
              <a href="/gcn/hands-on-labs/" class="menu__link">Hands-On Labs</a>
            </li>
            <li class="menu__item">
              <a href="/gcn/vscode-tools/" class="menu__link">Tools</a>
            </li> -->
            <!-- <li class="menu__launch__mobile">
              <a href="/gcn/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
            </li> -->
            <li class="menu__item">
              <div class="stack-container">
                <a href="#" class="menu__link stack__header">Docs</a>
                <div class="stack-menu-learn">
                  <div class="stack-row">
                    <div class="stack-column">
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/modules.svg'>
                        <a href="/gcn/modules/" class="item-line">Modules</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/guides.svg'>
                        <a href="/gcn/guides/" class="item-line">Guides</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/labs.svg'>
                        <a href="/gcn/hands-on-labs/" class="item-line">Hands-On Labs</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/tools.svg'>
                        <a href="/gcn/vscode-tools/" class="item-line">Tools</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="menu__item">
              <div class="stack-container">
                <a href="#" class="menu__link stack__header">Graal Projects</a>
                <div class="stack-menu">
                  <div class="stack-row">
                    <div class="stack-column">
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/graalstack.svg'>
                        <a href="https://graal.cloud/" class="item-line">Graal</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/graalvm.svg'>
                        <a href="https://graalvm.org/" class="item-line">GraalVM</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gcn/resources/img/header-navigation/graalos.svg'>
                        <a href="https://graal.cloud/graalos/" class="item-line">GraalOS</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="menu__launch__mobile">
              <a href="/gcn/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
            </li>
          </ul>
        </div>
        <div class="menu__launch">
          <a href="/gcn/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
        </div>
      </div>

      <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
      <button aria-label="hamburger mobile menu" class="btn btn-mobile-menu js-show-menu">
        <div class="inner"></div>
      </button>
    </nav>

  
</header>

<!-- <header  class="header header--content" >

  

  

    <nav class="menu">
      <div class="menu__row">
        <div>
          <a href="/gcn/graal">
            <img class="logo-mobile" src="/gcn/resources/img/gcn-logo-01.svg" alt="Graal Cloud Native logo">
          </a>
        </div>
        <div class="menu__container">
          <ul class="menu__list">
            <li class="menu__item">
              <a href="/gcn/graal/#whatisgraal" class="menu__link">About</a>
            </li>
            <li class="menu__item">
              <a href="https://graalvm.org" class="menu__link">GraalVM</a>
            </li>
            <li class="menu__item">
              <a href="https://graalvm.org" class="menu__link">GraalVM</a>
            </li>
            <li class="menu__item">
              <a href="https://graalvm.org" class="menu__link">GraalVM</a>
            </li>
          </ul>
        </div>
      </div>

      <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
      <button aria-label="hamburger mobile menu" class="btn btn-mobile-menu js-show-menu">
        <div class="inner"></div>
      </button>
    </nav>

  
</header> -->

      <main  class="content"   aria-label="Content">
        <div class="wrapper wrapper-content">
  <article>
  <div class="row d-flex flex-wrap">
    <div class="col-sm-3 docsimpro col-bg">
      <div class="sidebar-wrap">
        <div class="sidebar">
          <div class="menuabout">
            <img id="sidebarClose" src="/gcn/resources/img/arrow_sidebar(close).svg" alt="Expand or collapse sidebar"
              class="btn-color no-display">
            <img id="sidebarOpen" src="/gcn/resources/img/arrow_sidebar.svg" alt="Expand or collapse sidebar">
          </div>
          
<div class="toc-floating">


<div class="toc-bullets">


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    

    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/gcn/docs/gcn-modules/secret-management/" class="_icon-book">
            Secret Management
          </a>
        </li>

        
        

        
        
          
          <li class="toc-bullets-sub toc-bullets-highlight">
          
            
            <a href="/gcn/gcn-modules/secret-management/micronaut-secrets-oracle-cloud/">
              Securely Store Application Secrets in Oracle Cloud Infrastructure Vault
            </a>
          </li>

          
            <div>
  <script>
    var scriptElement = document.currentScript;
    var div = $(scriptElement.parentElement);
    $(window).on("load", function () {
      $("#content-wrapper h2").each(function () {
        var li = $("<li></li>", { class: "toc-bullets-sub toc-bullets-sub-3" });
        var a = $("<a></a>", { href: "#" + $(this).attr("id") });
        a.text($(this).text().replace('#', ''));
        li.append(a);
        li.click(function (e) {
          e.preventDefault();
          var target = $(a.attr('href'));
          var scrollTo = target.offset().top - 80; // 80 - indent
          $('html, body').animate({ scrollTop: scrollTo }, 1000);
        });
        div.append(li);
      });
    });
  </script>
</div>
          
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

<!-- <li class="search additional-search">
  <form class="form-inline sidebar" action="/docs/search" autocomplete="on" method="get">
    <input class="input-search sidebar" type="text" id="search-box" name="query" placeholder="Search">
    <button type="submit sidebar" class="search-button"></button>
  </form>
</li> -->

</div>
  <!-- Search form -->
  <!-- <form class="search-container" action="/docs/search" autocomplete="on" method="get">
   <label for="search-box">Search</label>
    <input type="text" id="search-box" name="query">
    <button type="submit" class="searchbttn"></button>
  </form> -->
</div>

        </div>
      </div>
    </div>

    <div class="col-sm-9 docsmod">
      <div id="content-wrapper" class="docs-content docs-content--with-sidebar">
        <h1 id="securely-store-application-secrets-in-oracle-cloud-infrastructure-vault">
        
        
          Securely Store Application Secrets in Oracle Cloud Infrastructure Vault
        
        
      </h1>

<p>This guide describes how to create a Java application that accesses secrets in Oracle Cloud Infrastructure Vault.</p>

<p>Instead of storing a database URL, username, and password in plain text or environment variables, a secret manager provides a convenient way to store API keys, passwords, certificates, and other sensitive data while improving security.</p>

<p><a href="https://docs.oracle.com/iaas/Content/KeyManagement/Concepts/keyoverview.htm">Oracle Cloud Infrastructure Vault</a> lets you securely store and retrieve secrets such as passwords or other information that shouldn’t be accessible in cleartext. This guide describes how to use Vault to store database connection information for a Micronaut application that uses MySQL, and uses the Micronaut support for Oracle Cloud Infrastructure to make the process seamless.</p>
    
      <h3 id="prerequisites">
        
        
          Prerequisites <a href="#prerequisites" class="anchor_heading">#</a>
        
        
      </h3>

<ul>
  <li>JDK 17 or higher. See <a href="/gcn/get-started/setting-up-desktop/">Setting up Your Desktop</a>.</li>
  <li>An Oracle Cloud Infrastructure account. See <a href="/gcn/get-started/setting-up-cloud-accounts/">Setting up Your Cloud Accounts</a>.</li>
  <li>The Oracle Cloud Infrastructure <a href="https://docs.cloud.oracle.com/iaas/Content/API/SDKDocs/cliinstall.htm">CLI</a> installed with <a href="https://docs.oracle.com/iaas/Content/API/SDKDocs/cliinstall.htm#configfile">local access configured</a>.</li>
  <li>An Oracle Cloud Infrastructure <a href="https://docs.oracle.com/en/cloud/paas/integration-cloud/oracle-integration-oci/creating-oci-compartment.html">compartment</a> with appropriate permission granted to your Oracle Cloud Infrastructure user account to manage the Vault family in the compartment.</li>
  <li>An Oracle Cloud Infrastructure compartment with appropriate permission granted to your Oracle Cloud Infrastructure user to deploy and manage a database.</li>
  <li><a href="https://stedolan.github.io/jq/"><code>jq</code></a>: a lightweight and flexible command-line JSON processor.</li>
  <li>A Docker-API compatible container runtime such as <a href="https://docs.rancherdesktop.io/getting-started/installation/">Rancher Desktop</a> or <a href="https://www.docker.io/gettingstarted/">Docker</a> installed to build a deployable GraalVM Native Executable.</li>
  <li>The GCN CLI. See <a href="/gcn/get-started/setting-up-desktop/">Setting up Your Desktop</a>. (Optional.)</li>
</ul>

<p>Follow the steps below to create the application from scratch. However, you can also download the completed example in Java.</p>

<div id="tabs-doc1">
    <ul>
        <li class="tabs-gradle"><a name="gradle" href="#gradle">Gradle</a></li>
        <li class="tabs-maven"><a name="maven" href="#maven">Maven</a></li>
    </ul>
    <div id="gradle">
        <p><a href="/gcn/docs/gcn-modules/secret-management/archives/oci-secrets-demo-java-gradle.zip">Gradle Oracle Cloud Infrastructure Vault Example <img class="download-img-guides" src="/gcn/resources/img/gcn_modules/download-archive.png" alt="Download completed example" />
        </a>
        </p>
    </div>
    <div id="maven">
        <p><a href="/gcn/docs/gcn-modules/secret-management/archives/oci-secrets-demo-java-maven.zip">Maven Oracle Cloud Infrastructure Vault Example <img class="download-img-guides" src="/gcn/resources/img/gcn_modules/download-archive.png" alt="Download completed example" /></a>
        </p>
    </div>
</div>
    
      <h4 id="a-note-regarding-your-development-environment">
        
        
          A note regarding your development environment
        
        
      </h4>

<p>Consider using Visual Studio Code that provides native support for developing applications with the <a href="/gcn/vscode-tools/using-gcn-vscode-tools/">Graal Cloud Native Tools extension</a>.</p>

<blockquote>
  <p>Note: If you use IntelliJ IDEA, <a href="/gcn/resources/img/annotationprocessorsintellij.png">enable annotation processing</a>.</p>
</blockquote>
    
      <h2 id="1-create-the-application">
        
        
          1. Create the Application <a href="#1-create-the-application" class="anchor_heading">#</a>
        
        
      </h2>

<p>Create an application using the GCN Launcher.</p>

<ol>
  <li>
    <p>Open the <a href="/gcn/launcher/?advanced=true">GCN Launcher in advanced mode</a>.</p>
  </li>
  <li>Create a new project using the following selections.
    <ul>
      <li><strong>Project Type</strong>: <em>Application</em> (Default)</li>
      <li><strong>Project Name</strong>: <em>oci-secrets-demo</em></li>
      <li><strong>Base Package</strong>: <em>com.example</em> (Default)</li>
      <li><strong>Clouds</strong>: <em>OCI</em></li>
      <li><strong>Language</strong>: <em>Java</em> (Default)</li>
      <li><strong>Build Tool</strong>: <em>Gradle (Groovy)</em> or <em>Maven</em></li>
      <li><strong>Test Framework</strong>: <em>JUnit</em> (Default)</li>
      <li><strong>Java Version</strong>: <em>17</em> (Default)</li>
      <li><strong>Micronaut Version</strong>: (Default)</li>
      <li><strong>Cloud Services</strong>: <em>Database</em> and <em>Secret Management</em></li>
      <li><strong>Features</strong>: <em>GraalVM Native Image</em> and <em>MySQL</em></li>
      <li><strong>Sample Code</strong>: <em>Yes</em> (Default)</li>
    </ul>
  </li>
  <li>Click <strong>Generate Project</strong>. The GCN Launcher creates an application with the default package <code>com.example</code> in a directory named <em>oci-secrets-demo</em>. The application ZIP file will be downloaded in your default downloads directory. Unzip it, open in your code editor, and proceed to the next steps.</li>
</ol>

<p>Alternatively, use the GCN CLI as follows:</p>

<div id="tabs-doc2">
    <ul>
        <li class="tabs-gradle"><a name="gradle" href="#gradle">Gradle</a></li>
        <li class="tabs-maven"><a name="maven" href="#maven">Maven</a></li>
    </ul>
    <div id="gradle">
        <pre><code class="language-bash">gcn create-app com.example.oci-secrets-demo \
    --clouds=oci \
    --services=database,secretmanagement \
    --features=mysql,graalvm \
    --build=gradle \
    --lang=java</code></pre>
    </div>
    <div id="maven">
        <pre><code class="language-bash">gcn create-app com.example.oci-secrets-demo \
    --clouds=oci \
    --services=database,secretmanagement \
    --features=mysql,graalvm \
    --build=maven \
    --lang=java</code></pre>
    </div>
</div>

<p>For more information, see <a href="/gcn/get-started/using-gcn-cli/">Using the GCN CLI</a>.</p>
    
      <h3 id="11-configure-the-database-application">
        
        
          1.1. Configure the Database Application <a href="#11-configure-the-database-application" class="anchor_heading">#</a>
        
        
      </h3>

<p>Use the <a href="/gcn/gcn-modules/database/micronaut-mysql-database-oci/">Create and Connect a Micronaut Application to an Oracle Cloud Infrastructure MySQL Database</a> guide to create a MySQL database. Follow steps 1.1 (<em>Datasources Configuration</em>) and 2 (<em>Create an Oracle MySQL Database Instance</em>).</p>
    
      <h2 id="2-create-an-oracle-cloud-infrastructure-vault">
        
        
          2. Create an Oracle Cloud Infrastructure Vault <a href="#2-create-an-oracle-cloud-infrastructure-vault" class="anchor_heading">#</a>
        
        
      </h2>

<p>Create the Vault using the Oracle Cloud Infrastructure CLI. See the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/kms.html">Vault CLI command reference</a> for more information.</p>

<p>There are three required parameters for the <code>create</code> command: compartment OCID, display name, and Vault type.</p>
    
      <h3 id="21-compartment-ocid">
        
        
          2.1. Compartment OCID <a href="#21-compartment-ocid" class="anchor_heading">#</a>
        
        
      </h3>

<p>Use the same compartment as the one you used for your database, above. You should have saved the compartment OCID as an environment variable, named <code>$C</code>. (See step 2 “Create an Oracle MySQL Database Instance” of <a href="/gcn/gcn-modules/database/micronaut-mysql-database-oci/">Create and Connect a Micronaut Application to an Oracle Cloud Infrastructure MySQL Database</a>.)</p>
    
      <h3 id="22-create-the-vault">
        
        
          2.2. Create the Vault <a href="#22-create-the-vault" class="anchor_heading">#</a>
        
        
      </h3>

<p>Choose a display name (1-100 characters) and a Vault type, either <code>DEFAULT</code> or <code>VIRTUAL_PRIVATE</code>. Choose <code>DEFAULT</code> to avoid the cost of a virtual private Vault.</p>

<p>Run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/kms/management/vault/create.html">create command</a> with the compartment OCID, display name, and Vault type substituted:</p>

<pre><code class="language-bash">oci kms management vault create -c $C \
    --display-name gcn_guide_vault \
    --vault-type DEFAULT \
    | jq -r '.data.id'
</code></pre>

<p>The <code>jq</code> utility will extract the Vault OCID from the <code>id</code> property in the response; this is the unique identifier for your Vault which you’ll need later. Store the value as the <code>VAULT_ID</code> environment variable:</p>

<pre><code class="language-bash">export VAULT_ID=ocid1.vault.oc1.iad.b5re3....abuwcljryp5dmxbu3si7...
</code></pre>

<p>If you use Linux or Mac, you can combine both commands into one, creating the Vault and setting the environment variable at the same time:</p>
<pre><code class="language-bash">export VAULT_ID=$(oci kms management vault create -c $C \
    --display-name gcn_guide_vault \
    --vault-type DEFAULT \
    | jq -r '.data.id')
</code></pre>
    
      <h3 id="23-create-a-master-encryption-key">
        
        
          2.3. Create a Master Encryption Key <a href="#23-create-a-master-encryption-key" class="anchor_heading">#</a>
        
        
      </h3>

<p>To <a href="https://docs.oracle.com/iaas/Content/KeyManagement/Tasks/managingkeys.htm">create a Master Encryption Key</a>, you need the management endpoint URL. It wasn’t available in the response from the Vault <code>create</code> command, so run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/kms/management/vault/get.html">get command</a>:</p>

<pre><code class="language-bash">oci kms management vault get --vault-id $VAULT_ID
</code></pre>

<p>The response should look like this:</p>
<pre><code class="language-json">{
  "data": {
    "compartment-id": "ocid1.tenancy.oc1..aaaaaaaaixksuiqo3rx6...",
    "crypto-endpoint": "https://b5re3...-crypto.kms.us-ashburn-1.oraclecloud.com",
    ...
    "display-name": "gcn_guide_vault",
    "id": "ocid1.vault.oc1.iad.b5re3....abuwcljryp5dmxbu3si7...",
    "is-primary": true,
    "lifecycle-state": "ACTIVE",
    "management-endpoint": "https://b5re3...-management.kms.us-ashburn-1.oraclecloud.com",
    ...
  }
}
</code></pre>

<p>Wait a few minutes for the Vault to finish provisioning. Re-run the <code>get</code> command until the value of <code>lifecycle-state</code> is <code>ACTIVE</code>. The URL is the value of the <code>management-endpoint</code> property.</p>

<p>Store the URL as the <code>VAULT_ENDPOINT</code> environment variable:</p>
<pre><code class="language-bash">export VAULT_ENDPOINT=https://b5re3...-management.kms.us-ashburn-1.oraclecloud.com
</code></pre>

<p>Choose a name for the key, such as “gcn-guide-encryption-key”, and a “Protection Mode”, either <code>SOFTWARE</code> or <code>HSM</code>. Choose <code>SOFTWARE</code> to avoid the cost of using a hardware security module (HSM). Use the  <code>AES</code>  key shape algorithm and a key length of 32 (256 bits).</p>

<p>Run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/kms/management/key/create.html">create command</a> with the compartment OCID, display name, protection mode, key shape, and management endpoint substituted:</p>

<pre><code class="language-bash">oci kms management key create -c $C \
    --display-name gcn-guide-encryption-key \
    --protection-mode SOFTWARE \
    --key-shape '{"algorithm":"AES","length":"32"}' \
    --endpoint $VAULT_ENDPOINT \
    | jq -r '.data.id'
</code></pre>

<p>If you use Windows, escape the inner double quotes in the value for <code>key-shape</code>: <code>'{\"algorithm\":\"AES\",\"length\":\"32\"}</code></p>

<p>The <code>jq</code> utility will extract the <code>id</code> value from the response:</p>

<pre><code>ocid1.key.oc1.iad.b5re3.....abuwcljrcuie7t6gctc6...
</code></pre>

<p>Store the key ID as the <code>VAULT_KEY_ID</code> environment variable:</p>

<pre><code class="language-bash">export VAULT_KEY_ID=ocid1.key.oc1.iad.b5re3.....abuwcljrcuie7t6gctc6...
</code></pre>
    
      <h2 id="3-use-vault-with-micronaut">
        
        
          3. Use Vault with Micronaut <a href="#3-use-vault-with-micronaut" class="anchor_heading">#</a>
        
        
      </h2>

<p>The <a href="https://micronaut-projects.github.io/micronaut-oracle-cloud/latest/guide/#vault">micronaut-oracle-cloud</a> subproject provides integration between Micronaut applications and Oracle Cloud Infrastructure, including using Vault as a distributed configuration source. You do not have to add any dependencies manually because you selected the <strong>Database</strong> and <strong>Secret Management</strong> services when you created the application with GCN Launcher. The build file includes the following:</p>

<div id="tabs-doc3">
  <ul>
    <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
    <li class="tabs-maven"><a href="#maven">Maven</a></li>
  </ul>
  <div id="gradle">
    <p><em>oci/build.gradle</em></p>
    <pre><code class="language-java">implementation("io.micronaut.oraclecloud:micronaut-oraclecloud-vault")</code></pre>
  </div>
  <div id="maven">
    <p><em>oci/pom.xml</em></p>
    <pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.oraclecloud&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-oraclecloud-vault&lt;/artifactId&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
  </div>
</div>
    
      <h2 id="4-configuration-changes">
        
        
          4. Configuration Changes <a href="#4-configuration-changes" class="anchor_heading">#</a>
        
        
      </h2>

<p>Modify the file named <em>oci/src/main/resources/bootstrap-oraclecloud.properties</em> so that its contents matches the following:</p>

<pre><code>micronaut.application.name=oci
micronaut.config-client.enabled=true
# &lt;1&gt;
oci.config.instance-principal.enabled=true
oci.vault.config.enabled=true
# &lt;2&gt;
oci.vault.vaults[0].compartment-ocid=${C}
# &lt;3&gt;
oci.vault.vaults[0].ocid=${VAULT_ID}
</code></pre>

<p><strong>1</strong> Use <a href="https://micronaut-projects.github.io/micronaut-oracle-cloud/latest/guide/#instance-principals">Instance Principal authentication</a> to enable the Micronaut application to access the Vault.</p>

<p><strong>2</strong> Set the value of the <code>compartment-ocid</code> property with the OCID unique identifier of the compartment where you created the Vault and secrets.</p>

<p><strong>3</strong> Set the value of the <code>ocid</code> property with the Vault OCID unique identifier you saved when creating the Vault.</p>

<p>Modify the file named <em>oci/src/main/resources/application-oraclecloud.properties</em> so that its contents matches the following:</p>

<pre><code>datasources.default.db-type=mysql
datasources.default.dialect=MYSQL
datasources.default.driver-class-name=com.mysql.cj.jdbc.Driver
flyway.datasources.default.enabled=true
oci.config.profile=DEFAULT
</code></pre>
    
      <h2 id="5-deploy-the-application">
        
        
          5. Deploy the Application <a href="#5-deploy-the-application" class="anchor_heading">#</a>
        
        
      </h2>

<p>Use the <a href="/gcn/gcn-modules/database/micronaut-mysql-database-oci/">Create and Connect a Micronaut Application to an Oracle Cloud Infrastructure MySQL Database</a> guide to create a compute instance and deploy the application to it; follow the steps in the “Create a Compute Instance” and “Deploy from a Native Executable” sections up to the step where you start the application. You need to connect the application to the MySQL database before starting it up.</p>

<p>When creating the Oracle Cloud Infrastructure Compute instance, use the same subnet as the one where you created the Oracle Cloud Infrastructure MySQL database, otherwise the application will not be able to access the database.</p>
    
      <h2 id="6-configure-mysql-access">
        
        
          6. Configure MySQL Access <a href="#6-configure-mysql-access" class="anchor_heading">#</a>
        
        
      </h2>

<p>Use the <a href="/gcn/gcn-modules/database/micronaut-mysql-database-oci">Create and Connect a Micronaut Application to an Oracle Cloud Infrastructure MySQL Database</a> guide to configure access to the MySQL database; follow the steps in the “Configure a MySQL Database” section. You will need the private IP address of the VM, the MySQL private IP address, and the admin username and password you chose when creating the database.</p>
    
      <h2 id="7-create-secrets">
        
        
          7. Create Secrets <a href="#7-create-secrets" class="anchor_heading">#</a>
        
        
      </h2>

<p>Database connectivity settings are specified in the application configuration, from values in configuration files, and, as in this guide, from values in a distributed property source such as Vault.</p>

<p>The initial configuration created by the launcher in <em>oci/src/main/resources/application-oraclecloud.properties</em> includes these values:</p>

<pre><code>datasources.default.db-type=mysql
datasources.default.dialect=MYSQL
datasources.default.driver-class-name=com.mysql.cj.jdbc.Driver
</code></pre>

<p>In this guide you store values for the username, password, and URL in your Vault by creating Vault secrets for <code>datasources.default.username</code>, <code>datasources.default.password</code>, and <code>datasources.default.url</code>.</p>
    
      <h3 id="71-datasourcesdefaultusername">
        
        
          7.1. datasources.default.username <a href="#71-datasourcesdefaultusername" class="anchor_heading">#</a>
        
        
      </h3>

<p>The first secret is for the database username, so the secret name is <code>datasources.default.username</code>.</p>

<p>Secret values must be Base64-encoded. You can encode the value programmatically, for example <code>Base64.getEncoder().encodeToString("the value".getBytes())</code>, or use an online tool such as <a href="https://www.base64encode.org/">https://www.base64encode.org/</a>.</p>

<p>Run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/vault/secret/create-base64.html">create-base64 command</a> with the compartment OCID, encryption key OCID, Vault OCID, secret name, and Base64-encoded secret value substituted. If you use <code>guide_user</code> as the username, the Base64-encoded value will be <code>Z3VpZGVfdXNlcg==</code>.</p>

<pre><code class="language-bash">oci vault secret create-base64 -c $C \
    --key-id $VAULT_KEY_ID \
    --vault-id $VAULT_ID \
    --secret-name datasources.default.username \
    --secret-content-content Z3VpZGVfdXNlcg==
</code></pre>

<blockquote>
  <p>Note: the command leaves the Base64-encoded value in your shell history. To avoid this, create a JSON file containing the parameters and pass that as an argument to the command.</p>
</blockquote>

<p>To use this approach, create a file named <em>key.json</em> with values substituted:</p>

<pre><code class="language-json">{
   "compartmentId": "ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm...",
   "keyId": "ocid1.key.oc1.iad.b5re3.....abuwcljrcuie7t6gctc6...",
   "vaultId": "ocid1.vault.oc1.iad.b5re3....abuwcljryp5dmxbu3si7...",
   "secretName": "datasources.default.username",
   "secretContentContent": "Z3VpZGVfdXNlcg=="
}
</code></pre>

<p>and run this <code>create-base64</code> command instead:</p>
<pre><code class="language-bash">oci vault secret create-base64 --from-json file://key.json
</code></pre>

<p>With either approach the response should look like this:</p>
<pre><code class="language-json">{
  "data": {
    "compartment-id": "ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm...",
    ...
    "id": "ocid1.vaultsecret.oc1.iad.amaaaaaafzr7royabqgz...",
    "key-id": "ocid1.key.oc1.iad.b5re3.....abuwcljrcuie7t6gctc6...",
    "lifecycle-state": "CREATING",
    "secret-name": "datasources.default.username",
    ...
    "vault-id": "ocid1.vault.oc1.iad.b5re3....abuwcljryp5dmxbu3si7..."
  }
}
</code></pre>
    
      <h3 id="72-datasourcesdefaultpassword">
        
        
          7.2. datasources.default.password <a href="#72-datasourcesdefaultpassword" class="anchor_heading">#</a>
        
        
      </h3>

<p>Create a second secret with the name <code>datasources.default.password</code>. The value is the Base64-encoded database user password you chose earlier.</p>
    
      <h3 id="73-datasourcesdefaulturl">
        
        
          7.3. datasources.default.url <a href="#73-datasourcesdefaulturl" class="anchor_heading">#</a>
        
        
      </h3>

<p>Create a third secret with the name <code>datasources.default.url</code>. The URL is <code>jdbc:mysql://&lt;MySQL IP address&gt;:3306/&lt;MySQL Database Name&gt;</code> with the private IP address of your MySQL database and name of the database you created (e.g., “gcnDB”) substituted. Set the value of the secret as the Base64-encoded URL value.</p>
    
      <h2 id="8-instance-principal-authentication">
        
        
          8. Instance Principal authentication <a href="#8-instance-principal-authentication" class="anchor_heading">#</a>
        
        
      </h2>

<p><a href="https://micronaut-projects.github.io/micronaut-oracle-cloud/latest/guide/#instance-principals">Instance Principal authentication</a> enables the Micronaut application to retrieve secrets from Vault. To use this, create a dynamic group and add a policy statement granting permission.</p>
    
      <h3 id="81-dynamic-group">
        
        
          8.1. Dynamic Group <a href="#81-dynamic-group" class="anchor_heading">#</a>
        
        
      </h3>

<p>Choose a group name, such as “gcn-guide-dg”, and a matching rule (the logic that will be used to determine group membership). For this guide, use a rule that includes all instances in your compartment: <code>instance.compartment.id = 'ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm…'</code> (replacing <code>ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm…</code> with your compartment OCID).</p>

<p>Run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/iam/dynamic-group/create.html">create command</a> with the compartment OCID substituted:</p>

<pre><code class="language-bash">oci iam dynamic-group create \
   --name gcn-guide-dg \
   --description gcn-guide-dg \
   --matching-rule "instance.compartment.id = 'ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm...'"
</code></pre>

<p>For more information, see <a href="https://docs.oracle.com/iaas/Content/Identity/Tasks/managingdynamicgroups.htm">Dynamic Groups</a>.</p>
    
      <h3 id="82-dynamic-group-policy-statements">
        
        
          8.2. Dynamic Group Policy Statements <a href="#82-dynamic-group-policy-statements" class="anchor_heading">#</a>
        
        
      </h3>

<p>Create the policy that grants read access to Vault secrets in your compartment.</p>

<p>Run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/iam/policy/create.html">create command</a> with your compartment OCID substituted:</p>

<pre><code class="language-bash">oci iam policy create -c $C \
    --name gcn-guide-policy \
    --description gcn-guide-policy \
    --statements '["allow dynamic-group gcn-guide-dg to read secret-family in compartment id ocid1.compartment.oc1..aaaaaaaarkh3s2wcxbbm..."]' \
    | jq -r '.data.id'
</code></pre>

<p>The <code>jq</code> utility will extract the policy OCID from the <code>id</code> property in the response. Store the value as the <code>POLICY_ID</code> environment variable:</p>

<pre><code class="language-bash">export POLICY_ID=ocid1.policy.oc1..aaaaaaaau7uhwxr3ynlr...
</code></pre>
    
      <h2 id="9-start-the-application">
        
        
          9. Start the application <a href="#9-start-the-application" class="anchor_heading">#</a>
        
        
      </h2>

<ol>
  <li>
    <p>Create an executable JAR file including all application’s dependencies:</p>

    <div id="tabs-doc4">
   <ul>
       <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
       <li class="tabs-maven"><a href="#maven">Maven</a></li>
   </ul>
   <div id="gradle">
       <pre><code class="language-bash">./gradlew :oci:shadowJar</code></pre>
   </div>
   <div id="maven">
       <pre><code class="language-bash">./mvnw install -pl lib -am &amp;&amp; ./mvnw package -pl oci -DskipTests</code></pre>
   </div>
 </div>
  </li>
  <li>
    <p>From the local console window, copy the JAR file from your computer to the compute instance using <code>scp</code>:</p>

    <div id="tabs-doc5">
   <ul>
       <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
       <li class="tabs-maven"><a href="#maven">Maven</a></li>
   </ul>
   <div id="gradle">
       <pre><code class="language-bash">scp -i /path/to/ssh-key-*.key path/to/oci-secrets-demo/oci/build/libs/oci-1.0-SNAPSHOT-all.jar opc@[COMPUTE_INSTANCE_PUBLIC_IP]:~/application.jar
       </code></pre>
   </div>
   <div id="maven">
       <pre><code class="language-bash">scp -i /path/to/ssh-key-*.key path/to/oci-secrets-demo/oci/target/oci-1.0-SNAPSHOT.jar opc@[COMPUTE_INSTANCE_PUBLIC_IP]:~/application.jar
       </code></pre>
   </div>
 </div>
  </li>
  <li>Once copied, connect to the compute instance (if it has disconnected by now):
    <pre><code class="language-bash"> ssh -i /path/to/ssh-key-*.key opc@[COMPUTE_INSTANCE_PUBLIC_IP]
</code></pre>
  </li>
  <li>Start the application:
    <pre><code class="language-bash"> java -jar application.jar
</code></pre>
  </li>
  <li>From the local console window, run this command to test creating and storing a new <code>Genre</code> in the database:
    <pre><code class="language-bash"> curl -X "POST" "http://[COMPUTE_INSTANCE_PUBLIC_IP]:8080/genres" \
       -H 'Content-Type: application/json; charset=utf-8' \
       -d $'{ "name": "music" }'
</code></pre>
    <p>Then list the genres:</p>
    <pre><code class="language-bash"> curl [COMPUTE_INSTANCE_PUBLIC_IP]:8080/genres/list
</code></pre>

    <p>The response should look like this:</p>
    <pre><code class="language-json"> {"id":1,"name":"music"}
</code></pre>
  </li>
</ol>
    
      <h2 id="10-package-with-graalvm-native-image">
        
        
          10. Package with GraalVM Native Image <a href="#10-package-with-graalvm-native-image" class="anchor_heading">#</a>
        
        
      </h2>

<p>GCN supports compiling Java applications ahead-of-time into native executables using <a href="https://www.graalvm.org/native-image/">GraalVM Native Image</a> and <a href="https://graalvm.github.io/native-build-tools/latest/index.html">Native Build Tools</a>. Packaged as a native executable, it significantly reduces the application startup time and memory footprint.</p>

<blockquote>
  <p><strong>Prerequisites</strong>: GraalVM Native Image is required to build native executables. <a href="https://github.com/graalvm/get.graalvm.org/">Install GraalVM JDK with Native Image</a> if you have not done that yet.</p>
</blockquote>

<p>If you build a native executable locally, it will only run on your OS, and isn’t suitable for deployment to a Compute instance. To create a deployable native executable, use a different packaging command that builds the executable inside a container, which you’ll extract from the container to deploy to the cloud.</p>

<ol>
  <li>
    <p>From the local console window, generate a native executable by running the following command:</p>

    <div id="tabs-doc6">
   <ul>
       <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
       <li class="tabs-maven"><a href="#maven">Maven</a></li>
   </ul>
   <div id="gradle">
       <pre><code class="language-bash">./gradlew :oci:dockerBuildNative</code></pre>
   </div>
   <div id="maven">
       <pre><code class="language-bash">./mvnw install -pl lib -am &amp;&amp; ./mvnw package -pl oci -Dpackaging=docker-native</code></pre>
   </div>
 </div>

    <p>You can customize the name of the resulting binary by <a href="https://graalvm.github.io/native-build-tools/latest/">updating the Maven/Gradle plugin for GraalVM Native Image configuration</a>.</p>
  </li>
  <li>
    <p>Find the container image ID that you’ll use to extract the native executable from the container image you built by running:</p>

    <pre><code class="language-bash"> docker image ls
</code></pre>

    <p>The images are listed chronologically with the most recent at the top, so your output will look like this:</p>

    <pre><code class="language-bash"> REPOSITORY   TAG      IMAGE ID       CREATED          SIZE
 oci          latest   41c8a902b2e7   32 seconds ago   100MB
</code></pre>
  </li>
  <li>
    <p>Extract the native executable by running these commands, replacing <code>&lt;image_id&gt;</code> with the ID of the container image ID, for example, <code>41c8a902b2e7</code>:</p>

    <pre><code class="language-bash"> docker create --name container_temp &lt;image_id&gt;
 docker cp container_temp:/app/application .
 docker rm container_temp
</code></pre>
  </li>
</ol>
    
      <h2 id="11-deploy-from-a-native-executable">
        
        
          11. Deploy from a Native Executable <a href="#11-deploy-from-a-native-executable" class="anchor_heading">#</a>
        
        
      </h2>

<ol>
  <li>
    <p>From the local console window, copy the native executable from your computer to the Compute instance using <code>scp</code>:</p>

    <pre><code class="language-bash"> scp -i /path/to/ssh-key-*.key application opc@[COMPUTE_INSTANCE_PUBLIC_IP]:~/
</code></pre>
  </li>
  <li>Once copied, connect to the compute instance (if it has disconnected by now):
    <pre><code class="language-bash"> ssh -i /path/to/ssh-key-*.key opc@[COMPUTE_INSTANCE_PUBLIC_IP]
</code></pre>
  </li>
  <li>
    <p>Stop the application running from the JAR file if it’s still running.</p>
  </li>
  <li>Run the application from the native executable:
    <pre><code class="language-bash"> ./application
</code></pre>
  </li>
  <li>From the local console window, run this command to test creating and storing a new <code>Genre</code> in the database:
    <pre><code class="language-bash"> curl -X "POST" "http://[COMPUTE_INSTANCE_PUBLIC_IP]:8080/genres" \
       -H 'Content-Type: application/json; charset=utf-8' \
       -d $'{ "name": "music" }'
</code></pre>
    <p>Then list all genres:</p>
    <pre><code class="language-bash"> curl [COMPUTE_INSTANCE_PUBLIC_IP]:8080/genres/list
</code></pre>

    <p>You do not need to install a Java VM to run the application from a native executable. The native executable is a self-contained binary. Deploying from a native executable significantly reduces application startup time and memory footprint.</p>
  </li>
</ol>
    
      <h2 id="12-clean-up-cloud-resources">
        
        
          12. Clean up Cloud Resources <a href="#12-clean-up-cloud-resources" class="anchor_heading">#</a>
        
        
      </h2>

<p>After you’ve completed this guide, you can clean up the resources you created.</p>

<p><a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/iam/policy/delete.html">Delete the policy</a> by running the following command:</p>

<pre><code class="language-bash">oci iam policy delete --policy-id $POLICY_ID
</code></pre>

<p>To delete the dynamic group, find its OCID by running the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/iam/dynamic-group/list.html">list command</a>:</p>

<pre><code class="language-bash">oci iam dynamic-group list | jq -r '.data[] | select(.name=="gcn-guide-dg") | .id'
</code></pre>

<p>and run the <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/iam/dynamic-group/delete.html">delete command</a>, substituting the group OCID:</p>

<pre><code class="language-bash">oci iam dynamic-group delete --dynamic-group-id ocid1.dynamicgroup.oc1..aaaaaaaaipoabhhaqnj77urm...
</code></pre>

<p>Delete the Vault. You cannot delete it directly; instead <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/kms/management/vault/schedule-deletion.html">request deletion</a> at a date at least seven days in the future. Run this, replacing the date:</p>

<pre><code class="language-bash">oci kms management vault schedule-deletion \
    --vault-id $VAULT_ID \
    --time-of-deletion 2023-04-12
</code></pre>

<p>Finally, delete the database it <a href="https://docs.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/mysql/db-system/delete.html">using the CLI</a>. Run the following command:</p>

<pre><code class="language-bash">oci mysql db-system delete \
    --db-system-id ocid1.mysqldbsystem.oc1.iad.aaaaaaaa2pq3a37hftut...
</code></pre>
    
      <h3 id="summary">
        
        
          Summary <a href="#summary" class="anchor_heading">#</a>
        
        
      </h3>

<p>This guide demonstrated how to create a Java application that accesses secrets in Oracle Cloud Infrastructure Vault. You also saw how to package this application into a native executable and deploy it from a Compute instance.</p>
    
      <h3 id="related-documentation">
        
        
          Related Documentation <a href="#related-documentation" class="anchor_heading">#</a>
        
        
      </h3>
<ul>
  <li><a href="https://micronaut-projects.github.io/micronaut-oracle-cloud/latest/guide/">Micronaut Oracle Cloud</a></li>
  <li><a href="https://docs.oracle.com/iaas/Content/KeyManagement/home.htm">Oracle Cloud Infrastructure Vault</a></li>
</ul>

      </div>

      <div role="button" class="menu-btn menu-btn--sidebar js-show-sidebar" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </div>
  </div>
</article>



</div>

      </main>

      
<footer class="footer footer__mobile">

  <div class="container-fluid container-fluid--custom-sm">
    <div class="row">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12">
        <div class="row footer-content">
          <div class="col-md-3 col-sm-4">
            <h6 class="title-footer" onclick="fadeInAndOut(this)">Learn</h6>
            <div class="grow">
              <ul class="footer-list">
                <li class="footer-list__item"><a href="/gcn/get-started/">Get Started</a></li>
                <li class="footer-list__item"><a href="/gcn/guides/">Guides</a></li>
                <li class="footer-list__item"><a href="/gcn/hands-on-labs/">Labs</a></li>
                <li class="footer-list__github">
                  <img class="footer__icon" src="/gcn/resources/img/footer/logo-github.svg" alt="Github icon">
                  <a href="https://github.com/oracle/gcn">Github</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md-3 col-sm-4">
            <h6 class="title-footer" onclick="fadeInAndOut(this)">About</h6>
            <div class="grow">
              <ul class="footer-list">
                <li class="footer-list__item"><a href="/gcn/about/#gcn-support" target="blank">Commercial Support</a></li>
                <li class="footer-list__item"><a href="https://www.graalvm.org/" target="blank">GraalVM Native Image</a></li>
                <li class="footer-list__item"><a href="https://micronaut.io/" target="_blank">Micronaut</a></li>
                <li class="footer-list__item"><a href="https://www.oracle.com/cloud/multicloud/what-is-multicloud/" target="_blank">Multicloud</a></li>
                <li class="footer-list__item"><a href="https://www.oracle.com/cloud/" target="blank">Oracle Cloud Infrastructure</a></li>
                <li class="footer-list__item"><a href="https://marketplace.visualstudio.com/items?itemName=oracle-labs-graalvm.graal-cloud-native-pack" target="blank">VS Code Tools</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-6 col-sm-12 aligning_1024">
            <div class="card--footer card--hovered box">
              <div>
                <div class="rubber-footer footer__oci-section">
                  <p class="title-footer quickstart">Build, test, and deploy applications on Oracle Cloud Infrastructure for free</p>
                  <a href="https://www.oracle.com/cloud/free/" target="_blank"
                    class="btn btn-primary">Try Oracle Cloud Infrastructure Free Tier</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
          <div class="row">
            <div class="col-sm-12">
              <p class="copyright">
                Copyright © 2023, Oracle and/or its affiliates. All rights reserved. Oracle and Java are
                registered trademarks. Other names may be trademarks of their respective owners.
              </p>
              <div id="teconsent"></div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</footer>

<script>
  function fadeInAndOut(thz) {
    var elmt = thz.nextElementSibling;//Get the element that is below the button that
    //was just clicked
    if (elmt.clientHeight) {
      elmt.style.height = 0;
    } else {
      var wrapper = elmt.querySelector('ul');
      elmt.style.height = wrapper.clientHeight + "px";
    }
    /*
        elmt.classList.toggle("acordianPanelHidden");//Toggle the class which changes
        //attributes which triggers the transition CSS
        */
  }

  // Check TRUSTe Consent for Functional or Implied Approval
  // The if test verifies if the user has given the consent
  if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
      (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
        oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(2) != -1) ) {

      //The following is a sample of a Maxymiser Tag being written to the DOM
      //If the user did not give consent, then the tag is not included and not invoked in the Browser
      document.write('<script type="text/javascript" src="//service.maxymiser.net/cdn/oracle/js/mmcore.js"><\/script>');
  }

  // Check TRUSTe Consent for Advertising or Implied Approval
  // The if test verifies if the user has given the consent
  if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
      (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
        oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(3) != -1) ) {

      //The following is a sample of a BlueKai Core Tag being written to the DOM
      //If the user did not give consent, then the tag is not included and not invoked in the Browser
      document.write('<script type="text/javascript">' +
      'window.bk_async = function() { ' +
      'BKTAG.doTag(62581, 1); }; ' +
      '(function() { ' +
      'var scripts = document.getElementsByTagName(\'script\')[0]; ' +
      'var s = document.createElement(\'script\'); ' +
      's.async = true; ' +
      's.src = "https://tags.bkrtx.com/js/bk-coretag.js"; ' +
      'scripts.parentNode.insertBefore(s, scripts); ' +
      '}()); ' +
      '<\/script>');
  }
</script>

    </div>
    <div class="overlay"></div>

    <!-- Start SiteCatalyst code -->
    <script language="JavaScript" src="https://www.oracle.com/us/assets/metrics/ora_otn.js"></script>
    <!-- End SiteCatalyst code -->

    <script src='/gcn/resources/lib/slick-slider/slick.min.js'></script>
    <script src='/gcn/resources/js/main.js'></script>
    <script src='/gcn/resources/js/ui.js'></script>
    <script src='/gcn/resources/js/filters.js'></script>
    <script src='/gcn/resources/js/sidebar.js'></script>
  </body>
</html>
