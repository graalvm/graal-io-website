<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/gdk/resources/img/graalvm.png" />
  <meta name="twitter:widgets:border-color" content="#55acee">

  <title>
    
      Deploy a Micronaut Microservices Application to the Google Kubernetes Engine
    
  </title>
  <meta name="description" content="The Graal Development Kit for Micronaut (GDK) is a build of a curated set of Micronaut framework modules and their required libraries for building portable c..."/>
  <meta name="last_modified" content="2024-07-19 14:09:50 +0000"/>
  <meta name="last_built" content="2024-07-24 09:25:17 +0000"/>
  <link rel="stylesheet" href="/gdk/assets/main.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/gdk/resources/img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/gdk/resources/img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/gdk/resources/img/favicon/favicon-16x16.png">
  <link rel="manifest" href="/gdk/resources/img/favicon/site.webmanifest">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="google-site-verification" content="-vRqwa9WYn6AaQGnl88xvrLw6ac4xoKVkZkhanmlRhU" />
  <link rel="canonical" href="https://www.graal.cloud/gdk/gdk-modules/kubernetes/micronaut-k8s-gcp/">

  <!-- jQuery UI Tabs -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/gdk/resources/lib/jquery/jquery-ui.css">
</head>

      <script src="/gdk/resources/lib/jquery/jquery-3.6.1.min.js"></script>
    <script src="/gdk/resources/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src='/gdk/resources/lib/sticky-sidebar/resizeSensor.js'></script>
    <script src='/gdk/resources/lib/sticky-sidebar/sticky-sidebar.min.js'></script>
    <script src="/gdk/resources/lib/highlight/highlight.min.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Add TRUSTe Consent Script and Analytics -->
    <script async="async" type="text/javascript" src='//consent.trustarc.com/notice?domain=oracle.com&c=teconsent&js=bb&noticeType=bb&text=true&cdn=1&pcookie&gtm=1' crossorigin></script>
    <script src="https://www.oracle.com/assets/truste-oraclelib.js"></script>
    <!-- jQuery UI Tabs -->
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>


  <body class="preload">
    <!-- Start SiteCatalyst code -->
    <script language="JavaScript" src="https://www.oracle.com/us/assets/metrics/ora_otn.js"></script>
    <!-- End SiteCatalyst code -->

    <div  class="wrapper wrapper--nofooter" >

      <header  class="header header--content" 
  role="banner">

  

  

    <nav class="menu">
      <div class="menu__row">
        <div>
          <a href="/gdk/">
            <img class="logo-mobile" src="/gdk/resources/img/gdk-logo-new.svg" alt="Graal Development Kit for Micronaut logo">
          </a>
        </div>
        <div class="menu__container">
          <ul class="menu__list">
            <li class="menu__item">
              <a href="/gdk/about/" class="menu__link">About</a>
            </li>
            <li class="menu__item">
              <a href="/gdk/get-started/" class="menu__link">Get Started</a>
            </li>
            <li class="menu__item">
              <div class="stack-container">
                <a href="#" class="menu__link stack__header">Docs</a>
                <div class="stack-menu-learn">
                  <div class="stack-row">
                    <div class="stack-column">
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/modules.svg'>
                        <a href="/gdk/modules/" class="item-line">Modules</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/guides.svg'>
                        <a href="/gdk/guides/" class="item-line">Guides</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/labs.svg'>
                        <a href="/gdk/hands-on-labs/" class="item-line">Hands-On Labs</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/tools.svg'>
                        <a href="/gdk/vscode-tools/" class="item-line">Tools</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="menu__item">
              <div class="stack-container">
                <a href="#" class="menu__link stack__header">Graal Projects</a>
                <div class="stack-menu">
                  <div class="stack-row">
                    <div class="stack-column">
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/graalstack.svg'>
                        <a href="https://graal.cloud/" class="item-line">Graal</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/graalvm.svg'>
                        <a href="https://graalvm.org/" class="item-line">GraalVM</a>
                      </div>
                      <div class="stack__item">
                        <img src='/gdk/resources/img/header-navigation/graalos.svg'>
                        <a href="https://graal.cloud/graalos/" class="item-line">GraalOS</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li class="menu__launch__mobile">
              <a href="/gdk/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
            </li>
          </ul>
        </div>
        <div class="menu__launch">
          <a href="/gdk/launcher/" class="btn-launch btn btn-primary" target="blank">Create App</a>
        </div>
      </div>

      <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
      <button aria-label="hamburger mobile menu" class="btn btn-mobile-menu js-show-menu">
        <div class="inner"></div>
      </button>
    </nav>

  
</header>


      <main  class="content"   aria-label="Content">
        <div class="wrapper wrapper-content">
  <article>
  <div class="row d-flex flex-wrap">
    <div class="col-sm-3 docsimpro col-bg">
      <div class="sidebar-wrap">
        <div class="sidebar">
          <div class="menuabout">
            <img id="sidebarClose" src="/gdk/resources/img/arrow_sidebar(close).svg" alt="Expand or collapse sidebar"
              class="btn-color no-display">
            <img id="sidebarOpen" src="/gdk/resources/img/arrow_sidebar.svg" alt="Expand or collapse sidebar">
          </div>
          
<div class="toc-floating">


<div class="toc-bullets">


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    

    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/gdk/docs/gdk-modules/kubernetes/" class="_icon-book">
            Kubernetes
          </a>
        </li>

        
        

        
        
          
          <li class="toc-bullets-sub toc-bullets-highlight">
          
            
            <a href="/gdk/gdk-modules/kubernetes/micronaut-k8s-gcp/">
              Deploy a Micronaut Microservices Application to the Google Kubernetes Engine
            </a>
          </li>

          
            <div>
  <script>
    var scriptElement = document.currentScript;
    var div = $(scriptElement.parentElement);
    $(window).on("load", function () {
      $("#content-wrapper h2").each(function () {
        var li = $("<li></li>", { class: "toc-bullets-sub toc-bullets-sub-3" });
        var a = $("<a></a>", { href: "#" + $(this).attr("id") });
        a.text($(this).text().replace('#', ''));
        li.append(a);
        li.click(function (e) {
          e.preventDefault();
          var target = $(a.attr('href'));
          var scrollTo = target.offset().top - 80; // 80 - indent
          $('html, body').animate({ scrollTop: scrollTo }, 1000);
        });
        div.append(li);
      });
    });
  </script>
</div>
          
        
      
    
  

  

<!-- <li class="search additional-search">
  <form class="form-inline sidebar" action="/docs/search" autocomplete="on" method="get">
    <input class="input-search sidebar" type="text" id="search-box" name="query" placeholder="Search">
    <button type="submit sidebar" class="search-button"></button>
  </form>
</li> -->

</div>
  <!-- Search form -->
  <!-- <form class="search-container" action="/docs/search" autocomplete="on" method="get">
   <label for="search-box">Search</label>
    <input type="text" id="search-box" name="query">
    <button type="submit" class="searchbttn"></button>
  </form> -->
</div>

        </div>
      </div>
    </div>

    <div class="col-sm-9 docsmod">
      <div id="content-wrapper" class="docs-content docs-content--with-sidebar">
        <!--
          Include file to warn of Windows/Gradle restriction
        -->
        <h1 id="deploy-a-micronaut-microservices-application-to-the-google-kubernetes-engine">
        
        
          Deploy a Micronaut Microservices Application to the Google Kubernetes Engine
        
        
      </h1>

<p>This guide shows how to deploy a Micronaut<sup>®</sup> application, consisting of three microservices, to the <a href="https://cloud.google.com/kubernetes-engine">Google Kubernetes Engine (GKE)</a> using the <a href="https://micronaut-projects.github.io/micronaut-kubernetes/latest/guide/">Micronaut Kubernetes project</a>.</p>
<blockquote>
  <p>The Micronaut Kubernetes project provides integration between Micronaut and Kubernetes.
It adds support for the following features:</p>
  <ul>
    <li>Service Discovery</li>
    <li>Configuration client for config maps and secrets</li>
    <li>Kubernetes blocking and non-blocking clients built on top of the official Kubernetes Java SDK</li>
  </ul>
</blockquote>

<p>GKE is a managed Kubernetes service for deploying containerized applications to the cloud.</p>

<p>TThe guide demonstrates how to use Kubernetes Service Discovery and Distributed Configuration to connect three microservices, and discover how Micronaut integration with Kubernetes simplifies deployment to GKE.</p>

<p>The application consists of three microservices:</p>

<ul>
  <li><em>users</em> - contains customer data that can place orders on items, also a new customer can be created. It requires HTTP basic authentication to access it.</li>
  <li><em>orders</em> - contains all orders that customers have created as well as available items that customers can order. This microservice also enables the creation of new orders. It requires HTTP basic authentication to access it.</li>
  <li><em>api</em> - acts as a gateway to the <em>orders</em> and <em>users</em> microservices. It combines results from both microservices and checks data when a customer creates a new order.</li>
</ul>
    
      <h3 id="prerequisites">
        
        
          Prerequisites <a href="#prerequisites" class="anchor_heading">#</a>
        
        
      </h3>

<ul>
  <li>JDK 17 or higher. See <a href="/gdk/get-started/setting-up-desktop/">Setting up Your Desktop</a>.</li>
  <li>A Google Cloud Platform (GCP) account. See <a href="/gdk/get-started/setting-up-cloud-accounts/">Setting up Your Cloud Accounts</a>.</li>
  <li>The <a href="https://cloud.google.com/cli">Google Cloud CLI</a> authenticated with your Google credentials. (Run <code>gcloud init</code> for quick authentication.)</li>
  <li>A Docker-API compatible container runtime such as <a href="https://docs.rancherdesktop.io/getting-started/installation/">Rancher Desktop</a> or <a href="https://www.docker.io/gettingstarted/">Docker</a> installed and running.</li>
  <li><a href="https://stedolan.github.io/jq/"><code>jq</code></a>: a lightweight and flexible command-line JSON processor.</li>
  <li><a href="https://kubernetes.io/docs/reference/kubectl/"><code>kubectl</code></a> to deploy the application to GKE.</li>
</ul>

<blockquote>
  <p>Note: This guide uses paid services; you may need to <a href="https://cloud.google.com/billing/docs/how-to/modify-project">enable billing</a> in Google Cloud to complete some steps in this guide.</p>
</blockquote>
    
      <h4 id="a-note-regarding-your-development-environment">
        
        
          A note regarding your development environment
        
        
      </h4>

<p>Consider using Visual Studio Code, which provides native support for developing applications with the <a href="/gdk/vscode-tools/using-gdk-vscode-tools/">Graal Development Kit extension</a>.</p>

<blockquote>
  <p>Note: If you use IntelliJ IDEA, <a href="/gdk/resources/img/annotationprocessorsintellij.png">enable annotation processing</a>.</p>
</blockquote>

<blockquote>
  <p>Windows platform: The GDK guides are compatible with Gradle only. Maven support is coming soon.</p>
</blockquote>
    
      <h2 id="1-create-or-download-a-microservices-application">
        
        
          1. Create or Download a Microservices Application <a href="#1-create-or-download-a-microservices-application" class="anchor_heading">#</a>
        
        
      </h2>

<p>You can create a microservices application from scratch by following <a href="/gdk/gdk-modules/kubernetes/micronaut-k8s/">this guide</a>, or you can download the completed example:</p>

<div id="tabs-doc1">
  <ul>
    <li class="tabs-gradle"><a name="gradle" href="#gradle">Gradle</a></li>
    <li class="tabs-maven"><a name="maven" href="#maven">Maven</a></li>
  </ul>
  <div id="gradle">
    <p><a href="https://github.com/oracle/gcn/releases/download/4.5.0.0/4.5.0.0_kubernetes_gcp-kubernetes-demo-java-gradle.zip">Gradle Micronaut GKE Example <img class="download-img-guides" src="/gdk/resources/img/gdk_modules/download-archive.png" alt="Download completed example" /></a>
    </p>
  </div>
  <div id="maven">
    <p><a href="https://github.com/oracle/gcn/releases/download/4.5.0.0/4.5.0.0_kubernetes_gcp-kubernetes-demo-java-maven.zip">Maven Micronaut GKE Example <img class="download-img-guides" src="/gdk/resources/img/gdk_modules/download-archive.png" alt="Download completed example" /></a>
    </p>
  </div>
</div>

<p>The application ZIP file will be downloaded to your default downloads directory. Unzip it, open it in your code editor, and proceed to the next steps.</p>

<blockquote>
  <p>Note: By default, a Micronaut application detects its runtime environment.
A detected environment (in this case, <strong>k8s</strong>) overrides the default specified environment (in this case, <strong>gcp</strong>).
This means that you should locate your configuration in the <em>application-k8s.properties</em> and <em>bootstrap-k8s.properties</em> files.
Alternatively, you can specify the <code>gcp</code> environment passing it as a command-line option (<code>-Dmicronaut.environments=gcp</code>) or via an environment variable (<code>MICRONAUT_ENVIRONMENTS=gcp</code>).</p>
</blockquote>
    
      <h2 id="2-set-up-gke">
        
        
          2. Set Up GKE <a href="#2-set-up-gke" class="anchor_heading">#</a>
        
        
      </h2>

<p>In this section, you take the steps to set up GKE for your application: create a project, enable the Google Cloud Container Registry API, configure Google Cloud Docker, enable the Google Cloud Kubernetes Engine API, and create a GKE cluster.</p>
    
      <h3 id="21-create-a-google-cloud-project">
        
        
          2.1. Create a Google Cloud Project <a href="#21-create-a-google-cloud-project" class="anchor_heading">#</a>
        
        
      </h3>

<p>Create a project in GCP and switch to it:</p>

<pre><code class="language-bash">export PROJECT_ID=gdk-guides
gcloud projects create $PROJECT_ID
gcloud config set project $PROJECT_ID
</code></pre>

<blockquote>
  <p>Note: The project id must be unique, so you may need to provide an alternative.</p>
</blockquote>

<blockquote>
  <p>Note: If you want to switch to an existing project use <code>gcloud projects list</code> to list all the existing projects.</p>
</blockquote>
    
      <h3 id="22-enable-the-google-cloud-container-registry-api">
        
        
          2.2. Enable the Google Cloud Container Registry API <a href="#22-enable-the-google-cloud-container-registry-api" class="anchor_heading">#</a>
        
        
      </h3>

<p>You need somewhere to store your container images, so enable the Google Cloud Container Registry API for your project via the Google Cloud CLI:</p>

<pre><code class="language-bash">gcloud services enable containerregistry.googleapis.com
</code></pre>
    
      <h3 id="23-configure-google-cloud-docker">
        
        
          2.3. Configure Google Cloud Docker <a href="#23-configure-google-cloud-docker" class="anchor_heading">#</a>
        
        
      </h3>

<p>Run <code>auth configure-docker</code> via the Google Cloud CLI, as follows:</p>

<pre><code class="language-bash">gcloud auth configure-docker
</code></pre>

<p>You should see output similar to:</p>

<pre><code>Adding credentials for all GCR repositories.
WARNING: A long list of credential helpers may cause delays running 'docker build'. We recommend passing the registry name to configure only the registry you are using.
After update, the following will be written to your Docker config file located at [~/.docker/config.json]:
 {
  "credHelpers": {
    "gcr.io": "gcloud",
    "us.gcr.io": "gcloud",
    "eu.gcr.io": "gcloud",
    "asia.gcr.io": "gcloud",
    "staging-k8s.gcr.io": "gcloud",
    "marketplace.gcr.io": "gcloud"
  }
}
</code></pre>
    
      <h3 id="24-enable-the-google-cloud-kubernetes-engine-api">
        
        
          2.4. Enable the Google Cloud Kubernetes Engine API <a href="#24-enable-the-google-cloud-kubernetes-engine-api" class="anchor_heading">#</a>
        
        
      </h3>

<p>To use the Kubernetes Engine API, enable it for your project via the Google Cloud CLI:</p>

<pre><code class="language-bash">gcloud services enable container.googleapis.com
</code></pre>
    
      <h3 id="25-create-a-gke-cluster">
        
        
          2.5. Create a GKE Cluster <a href="#25-create-a-gke-cluster" class="anchor_heading">#</a>
        
        
      </h3>

<p>Create a cluster named “gdk-k8s” and use two <em>n1-standard-2</em> instances as GKE nodes. Everything will be deployed on your default Google Cloud region. Create the “gdk-k8s” Kubernetes cluster, as follows:</p>

<pre><code class="language-bash">gcloud container clusters create gdk-k8s --machine-type n1-standard-2 --num-nodes 2 --disk-type pd-standard
</code></pre>
    
      <h2 id="3-prepare-microservices">
        
        
          3. Prepare Microservices <a href="#3-prepare-microservices" class="anchor_heading">#</a>
        
        
      </h2>
    
      <h3 id="31-export-environment-variables">
        
        
          3.1. Export Environment Variables <a href="#31-export-environment-variables" class="anchor_heading">#</a>
        
        
      </h3>

<p>Define some environment variables to make deploying process easier:</p>
<ul>
  <li><code>GCP_PROJECT_ID</code> to store your GCP project id.</li>
  <li><code>GCP_REGION</code> to store GCP region code.</li>
  <li><code>GKE_CLUSTER_NAME</code> to store the name of your cluster.</li>
</ul>

<p>For example:</p>

<pre><code class="language-bash">export GCP_PROJECT_ID="$(gcloud config get-value project)"
export GCP_REGION="$(gcloud config get-value compute/region)"
export GKE_CLUSTER_NAME="gdk-k8s"
</code></pre>
    
      <h3 id="32-create-and-publish-a-container-image-of-the-native-users-microservice">
        
        
          3.2. Create and Publish a Container Image of the Native <em>Users</em> Microservice <a href="#32-create-and-publish-a-container-image-of-the-native-users-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<p>To create a container image of the native <em>users</em> microservice named “users”, run the following command from the <em>users/</em> directory:</p>

<div id="tabs-doc11">
    <ul>
        <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
        <li class="tabs-maven"><a href="#maven">Maven</a></li>
    </ul>
    <div id="gradle">
        <pre><code class="language-bash">./gradlew dockerBuildNative</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>users/build/docker/native-main/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t users-gcp -f DockerfileNative</code></pre>
        </blockquote>
    </div>
    <div id="maven">
        <pre><code class="language-bash">./mvnw package -Dpackaging=docker-native -Pgraalvm</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>users/target/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t users-gcp -f Dockerfile</code></pre>
        </blockquote>
    </div>
</div>

<blockquote>
  <p>Note: Ensure that you construct container images for the correct CPU architecture. For instance, if you are using AArch64, modify the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to the value <code>linux/amd64</code>. Alternatively, you have the option to use AArch64 instances within your Kubernetes cluster.</p>
</blockquote>
    
      <h3 id="33-prepare-the-users-microservice">
        
        
          3.3. Prepare the <em>Users</em> Microservice <a href="#33-prepare-the-users-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<ol>
  <li>
    <p>Export the <em>users</em> microservice container image repository to the <code>USERS_REPOSITORY</code> environment variable:</p>

    <pre><code class="language-bash"> export USERS_REPOSITORY="gcr.io/$GCP_PROJECT_ID/users"
</code></pre>
  </li>
  <li>
    <p>Edit the file named <em>users/k8s-gcp.yml</em> as follows:</p>

    <pre><code class="language-yml"> apiVersion: apps/v1
 kind: Deployment
 metadata:
   namespace: gdk-k8s
   name: users
 spec:
   selector:
     matchLabels:
       app: users
   template:
     metadata:
       labels:
         app: users
     spec:
       serviceAccountName: gdk-service
       containers:
         - name: users
           image: 'gcr.io/&lt;gcp-project-id&gt;/users:latest' # &lt;1&gt;
           imagePullPolicy: Always #&lt;2&gt;
           ports:
             - name: http
               containerPort: 8080
           readinessProbe:
             httpGet:
               path: /health/readiness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
           livenessProbe:
             httpGet:
               path: /health/liveness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
             failureThreshold: 10
           env:
             - name: MICRONAUT_ENVIRONMENTS
               value: gcp
       imagePullSecrets:
         - name: gcpsersecret # &lt;3&gt;
 ---
 apiVersion: v1
 kind: Service
 metadata:
   namespace: gdk-k8s
   name: users
 spec:
   selector:
     app: users
   type: NodePort
   ports:
     - protocol: TCP
       port: 8080
</code></pre>

    <p><strong>1</strong> The URI of the repository that you created in GKE. Change the <code>&lt;gcp-project-id&gt;</code> to your Google project id. You can achieve this by running <code>sed -i'' -e "s/&lt;project-id&gt;/$GCP_PROJECT_ID/" users/k8s-gcp.yml</code>.</p>

    <p><strong>2</strong> Change <code>imagePullPolicy</code> to <code>Always</code>.</p>

    <p><strong>3</strong> The name of a secret to pull container images from Google Container Registry.</p>
  </li>
  <li>
    <p>Tag an existing <em>users</em> microservice container image:</p>

    <pre><code class="language-bash"> docker tag users-gcp:latest ${USERS_REPOSITORY}:latest
</code></pre>
  </li>
  <li>
    <p>Push the tagged <em>users</em> microservice container image to the remote repository:</p>

    <pre><code class="language-bash"> docker push ${USERS_REPOSITORY}:latest
</code></pre>
  </li>
</ol>
    
      <h3 id="34-create-and-publish-a-container-image-of-the-native-orders-microservice">
        
        
          3.4. Create and Publish a Container Image of the Native <em>Orders</em> Microservice <a href="#34-create-and-publish-a-container-image-of-the-native-orders-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<p>To create a container image of the native <em>orders</em> microservice named “orders”, run the following command from the <em>orders/</em> directory:</p>

<div id="tabs-doc12">
    <ul>
        <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
        <li class="tabs-maven"><a href="#maven">Maven</a></li>
    </ul>
    <div id="gradle">
        <pre><code class="language-bash">./gradlew dockerBuildNative</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>orders/build/docker/native-main/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t orders-gcp -f DockerfileNative</code></pre>
        </blockquote>
    </div>
    <div id="maven">
        <pre><code class="language-bash">./mvnw package -Dpackaging=docker-native -Pgraalvm</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>orders/target/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t orders-gcp -f Dockerfile</code></pre>
        </blockquote>
    </div>
</div>

<blockquote>
  <p>Note: Ensure that you construct container images for the correct CPU architecture. For instance, if you are using AArch64, modify the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to the value <code>linux/amd64</code>. Alternatively, you have the option to use AArch64 instances within your Kubernetes cluster.</p>
</blockquote>
    
      <h3 id="35-prepare-the-orders-microservice">
        
        
          3.5. Prepare the <em>Orders</em> Microservice <a href="#35-prepare-the-orders-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<ol>
  <li>
    <p>Export the <em>orders</em> microservice container image repository to the <code>ORDERS_REPOSITORY</code> environment variable:</p>

    <pre><code class="language-bash"> export ORDERS_REPOSITORY="gcr.io/$GCP_PROJECT_ID/orders"
</code></pre>
  </li>
  <li>
    <p>Edit the file named <em>orders/k8s-gcp.yml</em> as follows:</p>

    <pre><code class="language-yml"> apiVersion: apps/v1
 kind: Deployment
 metadata:
   namespace: gdk-k8s
   name: orders
 spec:
   selector:
     matchLabels:
       app: orders
   template:
     metadata:
       labels:
         app: orders
     spec:
       serviceAccountName: gdk-service
       containers:
         - name: orders
           image: 'gcr.io/&lt;gcp-project-id&gt;/orders:latest' # &lt;1&gt;
           imagePullPolicy: Always # &lt;2&gt;
           ports:
             - name: http
               containerPort: 8080
           readinessProbe:
             httpGet:
               path: /health/readiness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
           livenessProbe:
             httpGet:
               path: /health/liveness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
             failureThreshold: 10
           env:
             - name: MICRONAUT_ENVIRONMENTS
               value: gcp
       imagePullSecrets:
         - name: gcpsersecret # &lt;3&gt;
 ---
 apiVersion: v1
 kind: Service
 metadata:
   namespace: gdk-k8s
   name: orders
 spec:
   selector:
     app: orders
   type: NodePort
   ports:
     - protocol: TCP
       port: 8080
</code></pre>

    <p><strong>1</strong> The URI of the repository that you created in GKE. Change the <gcp-project-id> to your Google project id. You can achieve this by running <code>sed -i'' -e "s/&lt;project-id&gt;/$GCP_PROJECT_ID/" orders/k8s-gcp.yml</code>.</gcp-project-id></p>

    <p><strong>2</strong> Change <code>imagePullPolicy</code> to <code>Always</code>.</p>

    <p><strong>3</strong> The name of a secret to pull container images from Google Container Registry.</p>
  </li>
  <li>
    <p>Tag an existing <em>orders</em> microservice container image:</p>

    <pre><code class="language-bash"> docker tag orders-gcp:latest ${ORDERS_REPOSITORY}:latest
</code></pre>
  </li>
  <li>
    <p>Push the tagged <em>orders</em> microservice container image to the remote repository:</p>

    <pre><code class="language-bash"> docker push ${ORDERS_REPOSITORY}:latest
</code></pre>
  </li>
</ol>
    
      <h3 id="36-create-and-publish-a-container-image-of-the-native-api-gateway-microservice">
        
        
          3.6. Create and Publish a Container Image of the Native <em>API</em> (Gateway) Microservice <a href="#36-create-and-publish-a-container-image-of-the-native-api-gateway-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<p>To create a container image of the native <em>api</em> microservice named “api”, run the following command from the <em>api/</em> directory:</p>

<div id="tabs-doc13">
    <ul>
        <li class="tabs-gradle"><a href="#gradle">Gradle</a></li>
        <li class="tabs-maven"><a href="#maven">Maven</a></li>
    </ul>
    <div id="gradle">
        <pre><code class="language-bash">./gradlew dockerBuildNative</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>api/build/docker/native-main/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t api-gcp -f DockerfileNative</code></pre>
        </blockquote>
    </div>
    <div id="maven">
        <pre><code class="language-bash">./mvnw package -Dpackaging=docker-native -Pgraalvm</code></pre>
        <blockquote>
          <p>Note: If you encounter problems creating a container image, run the following command
          from the <em>api/target/</em> directory:</p>
          <pre><code class="language-bash">docker build . -t api-gcp -f Dockerfile</code></pre>
        </blockquote>
    </div>
</div>

<blockquote>
  <p>Note: Ensure that you construct container images for the correct CPU architecture. For instance, if you are using AArch64, modify the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to the value <code>linux/amd64</code>. Alternatively, you have the option to use AArch64 instances within your Kubernetes cluster.</p>
</blockquote>
    
      <h3 id="37-prepare-the-api-microservice">
        
        
          3.7. Prepare the <em>API</em> Microservice <a href="#37-prepare-the-api-microservice" class="anchor_heading">#</a>
        
        
      </h3>

<ol>
  <li>
    <p>Export the <em>api</em> microservice container image repository to the <code>API_REPOSITORY</code> environment variable:</p>

    <pre><code class="language-bash"> export API_REPOSITORY="gcr.io/$GCP_PROJECT_ID/api"
</code></pre>
  </li>
  <li>
    <p>Edit the file named <em>api/k8s-gcp.yml</em> as follows:</p>

    <pre><code class="language-yml"> apiVersion: apps/v1
 kind: Deployment
 metadata:
   namespace: gdk-k8s
   name: api
 spec:
   selector:
     matchLabels:
       app: api
   template:
     metadata:
       labels:
         app: api
     spec:
       serviceAccountName: gdk-service
       containers:
         - name: api
           image: 'gcr.io/&lt;gcp-project-id&gt;/api:latest' # &lt;1&gt;
           imagePullPolicy: Always # &lt;2&gt;
           ports:
             - name: http
               containerPort: 8080
           readinessProbe:
             httpGet:
               path: /health/readiness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
           livenessProbe:
             httpGet:
               path: /health/liveness
               port: 8080
             initialDelaySeconds: 5
             timeoutSeconds: 3
             failureThreshold: 10
           env:
             - name: MICRONAUT_ENVIRONMENTS
               value: gcp
       imagePullSecrets:
         - name: gcpsersecret # &lt;3&gt;
 ---
 apiVersion: v1
 kind: Service
 metadata:
   namespace: gdk-k8s
   name: api
 spec:
   selector:
     app: api
   type: LoadBalancer
   ports:
     - protocol: TCP
       port: 8080
</code></pre>

    <p><strong>1</strong> The URI of the repository that you created in GKE. Change the <code>&lt;gcp-project-id&gt;</code> to your Google project id. You can achieve this by running <code>sed -i'' -e "s/&lt;project-id&gt;/$GCP_PROJECT_ID/" api/k8s-gcp.yml</code>.</p>

    <p><strong>2</strong> Change <code>imagePullPolicy</code> to <code>Always</code>.</p>

    <p><strong>3</strong> The name of a secret to pull container images from Google Container Registry.</p>
  </li>
  <li>
    <p>Tag an existing <em>api</em> microservice container image:</p>

    <pre><code class="language-bash"> docker tag api-gcp:latest ${API_REPOSITORY}:latest
</code></pre>
  </li>
  <li>
    <p>Push the tagged <em>api</em> microservice container image to the remote repository:</p>

    <pre><code class="language-bash"> docker push ${API_REPOSITORY}:latest
</code></pre>
  </li>
</ol>
    
      <h2 id="4-deploy-microservices-to-gke">
        
        
          4. Deploy Microservices to GKE <a href="#4-deploy-microservices-to-gke" class="anchor_heading">#</a>
        
        
      </h2>

<ol>
  <li>
    <p>Create a directory for a <code>kubectl</code> configuration:</p>

    <pre><code class="language-bash"> mkdir -p $HOME/.kube
</code></pre>
  </li>
  <li>
    <p>Install the Google <code>kubectl</code> component:</p>

    <pre><code class="language-bash"> gcloud components install kubectl
</code></pre>
  </li>
  <li>
    <p>Generate a <code>kubectl</code> configuration for authentication to GKE:</p>

    <pre><code class="language-bash"> gcloud container clusters get-credentials gdk-k8s
</code></pre>
  </li>
  <li>
    <p>Set <code>KUBECONFIG</code> to the created config file, as shown below. (This variable is consumed by <code>kubectl</code>.)</p>

    <pre><code class="language-bash"> export KUBECONFIG=$HOME/.kube/config
</code></pre>
  </li>
  <li>
    <p>Deploy the <em>auth.yml</em> file that you created in the <a href="/gdk/gdk-modules/kubernetes/micronaut-k8s/">Deploy a Micronaut Microservices Application to a Local Kubernetes Cluster</a> guide:</p>

    <pre><code class="language-bash"> kubectl apply -f auth.yml
</code></pre>
  </li>
  <li>
    <p>Create a secret named “gcpsersecret” for authentication to Google Cloud Container Registry using the command below. (GKE needs credentials to be able to pull your microservice container images.)</p>

    <pre><code class="language-bash"> kubectl create secret docker-registry gcpsersecret \
       --docker-server=gcr.io \
       --docker-username=oauth3accesstoken \
       --docker-password="$(gcloud auth print-access-token)" \
       --docker-email=your@email.com
</code></pre>
  </li>
  <li>
    <p>Deploy the <em>users</em> microservice:</p>

    <pre><code class="language-bash"> kubectl apply -f users/k8s-gcp.yml
</code></pre>
  </li>
  <li>
    <p>Deploy the <em>orders</em> microservice:</p>

    <pre><code class="language-bash"> kubectl apply -f orders/k8s-gcp.yml
</code></pre>
  </li>
  <li>
    <p>Run the next command to deploy the <em>api</em> microservice:</p>

    <pre><code class="language-bash"> kubectl apply -f api/k8s-gcp.yml
</code></pre>
  </li>
</ol>
    
      <h2 id="5-test-integration-between-the-microservices-deployed-to-gke">
        
        
          5. Test Integration Between the Microservices Deployed to GKE <a href="#5-test-integration-between-the-microservices-deployed-to-gke" class="anchor_heading">#</a>
        
        
      </h2>

<ol>
  <li>Run the following command to check the status of the pods and make sure that all of them have the status “Running”:
    <pre><code class="language-bash"> kubectl get pods -n=gdk-k8s
</code></pre>

    <pre>
 NAME                      READY   STATUS    RESTARTS   AGE
 api-6fb4cd949f-kxxx8      1/1     Running   0          2d1h
 orders-595887ddd6-6lzp4   1/1     Running   0          2d1h
 users-df6f78cd7-lgnzx     1/1     Running   0          2d1h</pre>
  </li>
  <li>
    <p>Run this command to check the status of the microservices:</p>

    <pre><code class="language-bash"> kubectl get services -n=gdk-k8s
</code></pre>

    <pre>
 NAME         TYPE           CLUSTER-IP       EXTERNAL-IP             PORT(S)             AGE
 api          LoadBalancer   10.100.208.154   &lt;redacted&gt;              8080:31171/TCP      20m
 orders       NodePort       10.100.157.155   &lt;none&gt;                  8080:30742/TCP      20m
 users        NodePort       10.100.126.97    &lt;none&gt;                  8080:31580/TCP      20m</pre>

    <p>If <code>EXTERNAL-IP</code> is in a <code>&lt;pending&gt;</code> state, wait a couple of seconds and then run the command again.</p>
  </li>
  <li>Retrieve the URL of the <em>api</em> microservice and set it as the value of the <code>$API_URL</code> environment variable:
    <pre><code class="language-bash"> export API_URL=http://$(kubectl get svc api -n=gdk-k8s -o json | jq -r '.status.loadBalancer.ingress[0].ip'):8080
</code></pre>
  </li>
  <li>
    <p>Run a <code>curl</code> command to create a new user via the <em>api</em> microservice:</p>

    <pre><code class="language-bash"> curl -X "POST" "$API_URL/api/users" \
      -H 'Content-Type: application/json; charset=utf-8' \
      -d '{ "first_name": "Nemanja", "last_name": "Mikic", "username": "nmikic" }'
</code></pre>

    <p>Your output should look like:</p>

    <pre><code class="language-json"> {
   "id":1,
   "username":"nmikic",
   "first_name":"Nemanja",
   "last_name":"Mikic"
 }
</code></pre>
  </li>
  <li>
    <p>Run a <code>curl</code> command to create a new order via the <em>api</em> microservice:</p>

    <pre><code class="language-bash"> curl -X "POST" "$API_URL/api/orders" \
      -H 'Content-Type: application/json; charset=utf-8' \
      -d '{ "user_id": 1, "item_ids": [1,2] }'
</code></pre>

    <p>Your output should include details of the order, as follows:</p>

    <pre><code class="language-json"> {
   "id": 1,
   "user": {
     "first_name": "Nemanja",
     "last_name": "Mikic",
     "id": 1,
     "username": "nmikic"
   },
   "items": [
     {
       "id": 1,
       "name": "Banana",
       "price": 1.5
     },
     {
       "id": 2,
       "name": "Kiwi",
       "price": 2.5
     }
   ],
   "total": 4.0
 }
</code></pre>
  </li>
  <li>
    <p>Run a <code>curl</code> command to list the orders:</p>

    <pre><code class="language-bash"> curl "$API_URL/api/orders" \
      -H 'Content-Type: application/json; charset=utf-8'
</code></pre>

    <p>You should see output that is similar to the following:</p>

    <pre><code class="language-json"> [
   {
     "id": 1,
     "user": {
       "first_name": "Nemanja",
       "last_name": "Mikic",
       "id": 1,
       "username": "nmikic"
     },
     "items": [
       {
         "id": 1,
         "name": "Banana",
         "price": 1.5
       },
       {
         "id": 2,
         "name": "Kiwi",
         "price": 2.5
       }
     ],
     "total": 4.0
   }
 ]
</code></pre>
  </li>
  <li>
    <p>Try to place an order for a user who does not exist (with <code>id</code> 100). Run a <code>curl</code> command:</p>

    <pre><code class="language-bash"> curl -X "POST" "$API_URL/api/orders" \
      -H 'Content-Type: application/json; charset=utf-8' \
      -d '{ "user_id": 100, "item_ids": [1,2] }'
</code></pre>

    <p>You should see the following error message:</p>

    <pre><code class="language-json"> {
   "message": "Bad Request",
   "_links": {
     "self": [
       {
         "href": "/api/orders",
         "templated": false
       }
     ]
   },
   "_embedded": {
     "errors": [
       {
         "message": "User with id 100 doesn't exist"
       }
     ]
   }
 }
</code></pre>
  </li>
</ol>
    
      <h2 id="6-delete-kubernetes-resources">
        
        
          6. Delete Kubernetes Resources <a href="#6-delete-kubernetes-resources" class="anchor_heading">#</a>
        
        
      </h2>

<p>To delete all Kubernetes resources that were created in this guide, run this command:</p>

<pre><code class="language-bash">kubectl delete namespaces gdk-k8s
</code></pre>

<p>Delete the <code>gdk-k8s/users</code> artifacts container repository:</p>

<pre><code class="language-bash">gcloud container images delete ${USERS_REPOSITORY} --force-delete-tags --quiet
</code></pre>

<p>Delete the <code>gdk-k8s/orders</code> artifacts container repository:</p>

<pre><code class="language-bash">gcloud container images delete ${ORDERS_REPOSITORY} --force-delete-tags --quiet
</code></pre>

<p>Delete the <code>gdk-k8s/api</code> artifacts container repository:</p>

<pre><code class="language-bash">gcloud container images delete ${API_REPOSITORY} --force-delete-tags --quiet
</code></pre>

<p>Finally, delete the <code>gdk-k8s</code> GKE cluster:</p>

<pre><code class="language-bash">gcloud container clusters delete gdk-k8s
</code></pre>
    
      <h2 id="7-clean-up">
        
        
          7. Clean Up <a href="#7-clean-up" class="anchor_heading">#</a>
        
        
      </h2>

<p>When you have completed the guide, you can clean up the resources you created on Google Cloud Platform so you will not be billed for them in the future.</p>
    
      <h3 id="71-delete-the-project">
        
        
          7.1. Delete the Project <a href="#71-delete-the-project" class="anchor_heading">#</a>
        
        
      </h3>

<p>The easiest way to eliminate billing is to delete the project you created.</p>

<p>Deleting a project has the following consequences:</p>

<ul>
  <li>
    <p>If you used an existing project, you will also delete any other work you have done in the project.</p>
  </li>
  <li>
    <p>You cannot reuse the project ID of a deleted project. If you created a custom project ID that you plan to use in the future, you should delete the resources inside the project instead. This ensures that URLs that use the project ID, such as an <em>appspot.com</em> URL, remain available.</p>
  </li>
  <li>
    <p>If you are exploring multiple guides, reusing projects instead of deleting them prevents you from exceeding project quota limits.</p>
  </li>
</ul>
    
      <h4 id="711-via-the-cli">
        
        
          7.1.1. Via the CLI
        
        
      </h4>
<p>To delete the project using the Google Cloud CLI, run the following command:</p>

<pre><code class="language-bash">gcloud projects delete gdk-guides
</code></pre>
    
      <h4 id="712-via-the-cloud-platform-console">
        
        
          7.1.2. Via the Cloud Platform Console
        
        
      </h4>

<ol>
  <li>
    <p>In the Cloud Platform Console, go to the <a href="https://console.cloud.google.com/iam-admin/projects">Projects page</a>.</p>
  </li>
  <li>
    <p>In the project list, select the project you want to delete and click <strong>Delete project</strong>. Select the check box next to the project name and click <strong>Delete project</strong>.</p>
  </li>
  <li>
    <p>In the dialog box, enter the project ID, and then click <strong>Shut down</strong> to delete the project.</p>
  </li>
</ol>
    
      <h3 id="summary">
        
        
          Summary <a href="#summary" class="anchor_heading">#</a>
        
        
      </h3>

<p>This guide demonstrated how to use Kubernetes Service Discovery and Distributed Configuration, provided with the Micronaut Kubernetes integration, to connect three microservices, and to deploy these microservices to a Kubernetes cluster on the Google Kubernetes Engine.</p>
    
      <h3 id="related-documentation">
        
        
          Related Documentation <a href="#related-documentation" class="anchor_heading">#</a>
        
        
      </h3>

<ul>
  <li><a href="https://micronaut-projects.github.io/micronaut-kubernetes/latest/guide/">Micronaut Kubernetes module</a></li>
  <li><a href="https://micronaut-projects.github.io/micronaut-gcp/latest/guide/">Micronaut Google Cloud Platform integration</a></li>
  <li><a href="https://cloud.google.com/kubernetes-engine">Google Kubernetes Engine</a></li>
  <li><a href="https://cloud.google.com/container-registry">Google Cloud Container Registry</a></li>
  <li><a href="https://cloud.google.com/artifact-registry">Google Cloud Artifact Registry</a></li>
</ul>

      </div>

      <div role="button" class="menu-btn menu-btn--sidebar js-show-sidebar" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </div>
  </div>
</article>



</div>

      </main>

      
<footer class="footer footer__mobile">

  <div class="container-fluid container-fluid--custom-sm">
    <div class="row">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12">
        <div class="row footer-content">
          <div class="col-md-3 col-sm-4">
            <h6 class="title-footer" onclick="fadeInAndOut(this)">Learn</h6>
            <div class="grow">
              <ul class="footer-list">
                <li class="footer-list__item"><a href="/gdk/get-started/">Get Started</a></li>
                <li class="footer-list__item"><a href="/gdk/guides/">Guides</a></li>
                <li class="footer-list__item"><a href="/gdk/hands-on-labs/">Labs</a></li>
                <li class="footer-list__github">
                  <img class="footer__icon" src="/gdk/resources/img/footer/logo-github.svg" alt="Github icon">
                  <a href="https://github.com/oracle/graal-dev-kit" target="blank">Github</a>
                </li>
                <li class="footer-list__github">
                  <img class="footer__icon" src="/gdk/resources/img/footer/slack-icon.svg" alt="Github icon">
                  <a href="https://bit.ly/odevrel_slack" target="blank">#graal-dev-kit-for-micronaut</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md-3 col-sm-4">
            <h6 class="title-footer" onclick="fadeInAndOut(this)">About</h6>
            <div class="grow">
              <ul class="footer-list">
                <li class="footer-list__item"><a href="/gdk/about/#gdk-support" target="blank">Commercial Support</a></li>
                <li class="footer-list__item"><a href="https://www.graalvm.org/" target="blank">GraalVM Native Image</a></li>
                <li class="footer-list__item"><a href="https://micronaut.io/" target="_blank">Micronaut<sup>&reg;</sup> Framework</a></li>
                <li class="footer-list__item"><a href="https://www.oracle.com/cloud/multicloud/what-is-multicloud/" target="_blank">Multicloud</a></li>
                <li class="footer-list__item"><a href="https://www.oracle.com/cloud/" target="blank">Oracle Cloud Infrastructure</a></li>
                <li class="footer-list__item"><a href="https://marketplace.visualstudio.com/items?itemName=oracle-labs-graalvm.graal-cloud-native-pack" target="blank">VS Code Tools</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-6 col-sm-12 aligning_1024">
            <div class="card--footer card--hovered box">
              <div>
                <div class="rubber-footer footer__oci-section">
                  <p class="title-footer quickstart">Build, test, and deploy applications on Oracle Cloud Infrastructure for free</p>
                  <a href="https://www.oracle.com/cloud/free/" target="_blank"
                    class="btn btn-primary">Try Oracle Cloud Infrastructure Free Tier</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
          <div class="row">
            <div class="col-sm-12">
              <p class="copyright">
                Copyright &copy; 2023-2024, Oracle and/or its affiliates.
                All rights reserved.
                Oracle and Java are registered trademarks of Oracle and/or its affiliates.<br/>
                Micronaut<sup>&reg;</sup> is a registered trademark of Object Computing, Inc. 
                Use is for referential purposes and does not imply any endorsement or affiliation with any third-party product.
                Unauthorized use is strictly prohibited. Other names may be trademarks of their respective owners.
              </p>
              <div id="teconsent"></div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</footer>

<script>
  function fadeInAndOut(thz) {
    var elmt = thz.nextElementSibling;//Get the element that is below the button that
    //was just clicked
    if (elmt.clientHeight) {
      elmt.style.height = 0;
    } else {
      var wrapper = elmt.querySelector('ul');
      elmt.style.height = wrapper.clientHeight + "px";
    }
    /*
        elmt.classList.toggle("acordianPanelHidden");//Toggle the class which changes
        //attributes which triggers the transition CSS
        */
  }

  // Check TRUSTe Consent for Functional or Implied Approval
  // The if test verifies if the user has given the consent
  if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
      (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
        oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(2) != -1) ) {

      //The following is a sample of a Maxymiser Tag being written to the DOM
      //If the user did not give consent, then the tag is not included and not invoked in the Browser
      document.write('<script type="text/javascript" src="//service.maxymiser.net/cdn/oracle/js/mmcore.js"><\/script>');
  }

  // Check TRUSTe Consent for Advertising or Implied Approval
  // The if test verifies if the user has given the consent
  if ( (oracle.truste.api.getGdprConsentDecision().consentDecision) &&
      (oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(0) != -1 ||
        oracle.truste.api.getGdprConsentDecision().consentDecision.indexOf(3) != -1) ) {

      //The following is a sample of a BlueKai Core Tag being written to the DOM
      //If the user did not give consent, then the tag is not included and not invoked in the Browser
      document.write('<script type="text/javascript">' +
      'window.bk_async = function() { ' +
      'BKTAG.doTag(62581, 1); }; ' +
      '(function() { ' +
      'var scripts = document.getElementsByTagName(\'script\')[0]; ' +
      'var s = document.createElement(\'script\'); ' +
      's.async = true; ' +
      's.src = "https://tags.bkrtx.com/js/bk-coretag.js"; ' +
      'scripts.parentNode.insertBefore(s, scripts); ' +
      '}()); ' +
      '<\/script>');
  }
</script>

    </div>
    <div class="overlay"></div>

    <!-- Start SiteCatalyst code -->
    <script language="JavaScript" src="https://www.oracle.com/us/assets/metrics/ora_otn.js"></script>
    <!-- End SiteCatalyst code -->

    <script src='/gdk/resources/lib/slick-slider/slick.min.js'></script>
    <script src='/gdk/resources/js/main.js'></script>
    <script src='/gdk/resources/js/ui.js'></script>
    <script src='/gdk/resources/js/filters.js'></script>
    <script src='/gdk/resources/js/sidebar.js'></script>
    <script src='/gdk/resources/js/labs.js'></script>
    <script src='/gdk/resources/lib/highlight/highlight.min.js'></script> 
    <script>hljs.highlightAll();</script>
  </body>
</html>
